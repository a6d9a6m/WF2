<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:WF2.Library.ViewModels"
             xmlns:converters="using:WF2.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="WF2.Views.MainView"
             x:DataType="vm:MainViewModel"
             DataContext="{Binding MainViewModel, Source={StaticResource ServiceLocator}}">

    <UserControl.Resources>
        <converters:ImagePathConverter x:Key="ImagePathConverter"/>
    </UserControl.Resources>

    <UserControl.Styles>
        <Style Selector="UserControl">
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        
        <Style Selector="UserControl.dark">
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        
        <Style Selector="TextBlock.title">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style Selector="TextBlock.title.dark">
            <Setter Property="Foreground" Value="#f0f0f0"/>
        </Style>
        
        <Style Selector="Border.card">
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="Opacity" Value="0.9"/>
        </Style>

        <Style Selector="Border.card.dark">
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="Opacity" Value="0.9"/>
        </Style>
        
        <Style Selector="TextBox.search">
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="Foreground" Value="#212121"/>
        </Style>

        <Style Selector="TextBox.search.dark">
            <Setter Property="Background" Value="#2C2C2C"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
        </Style>

        <Style Selector="TextBlock.weather-info">
            <Setter Property="Foreground" Value="#212121"/>
        </Style>

        <Style Selector="TextBlock.weather-info.dark">
            <Setter Property="Foreground" Value="#E0E0E0"/>
        </Style>
    </UserControl.Styles>

    <Grid RowDefinitions="Auto, *, Auto">
        <!-- èƒŒæ™¯å›¾ç‰‡å±‚ -->
        <Image Grid.RowSpan="3"
               Source="{Binding BackgroundImagePath, Converter={StaticResource ImagePathConverter}}"
               Stretch="UniformToFill"
               IsHitTestVisible="False"
               Opacity="0.8"/>

        <!--æ ‡é¢˜æ  -->
        <StackPanel Grid.Row="0" Margin="30,30,30,20">
            <TextBlock Text="{Binding Greeting}"
                       FontSize="32"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       Classes="title"/>
            <TextBlock Text="{Binding SystemSubtitle}"
                       FontSize="14"
                       HorizontalAlignment="Center"
                       Foreground="#E8F0FE"
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- å¤©æ°”ä¿¡æ¯å¡ç‰‡ -->
        <Border Grid.Row="1"
                Margin="40,10"
                Padding="40"
                CornerRadius="24"
                MaxWidth="520"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                BoxShadow="0 12 35 0 #40000000"
                Classes="card"
                Opacity="0.75">

            <StackPanel Spacing="20">
                <!-- å¤©æ°”å›¾æ ‡ -->
                <TextBlock Text="{Binding WeatherIcon}"
                          FontSize="90"
                          HorizontalAlignment="Center"/>

                <!-- åŸŽå¸‚åç§° -->
                <TextBlock Text="{Binding LocationName}"
                          FontSize="26"
                          FontWeight="SemiBold"
                          HorizontalAlignment="Center"
                          Classes="weather-info"/>

                <!-- æ¸©åº¦æ˜¾ç¤º -->
                <TextBlock Text="{Binding Temperature}"
                          FontSize="64"
                          FontWeight="Light"
                          HorizontalAlignment="Center"
                          Foreground="#1976D2"/>

                <!-- å¤©æ°”çŠ¶å†µ -->
                <TextBlock Text="{Binding ConditionText}"
                          FontSize="20"
                          HorizontalAlignment="Center"
                          Classes="weather-info"
                          Opacity="0.7"/>

                <!-- è¯¦ç»†ä¿¡æ¯ -->
                <Grid ColumnDefinitions="*,*" Margin="0,10,0,0">
                    <!-- æ¹¿åº¦ -->
                    <StackPanel Grid.Column="0" Spacing="5" HorizontalAlignment="Center">
                        <TextBlock Text="ðŸ’§" FontSize="20"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="{Binding Humidity}"
                                  FontSize="14"
                                  FontWeight="Medium"
                                  HorizontalAlignment="Center"
                                  Classes="weather-info"
                                  TextAlignment="Center"/>
                    </StackPanel>

                    <!-- ä½“æ„Ÿæ¸©åº¦ -->
                    <StackPanel Grid.Column="1" Spacing="5" HorizontalAlignment="Center">
                        <TextBlock Text="ðŸŒ¡ï¸" FontSize="20"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="{Binding FeelsLike}"
                                  FontSize="14"
                                  FontWeight="Medium"
                                  HorizontalAlignment="Center"
                                  Classes="weather-info"
                                  TextAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>

